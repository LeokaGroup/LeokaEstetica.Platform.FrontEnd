<div class="block-moderation mt-5">
  <div>
    <!-- Список проектов. -->
    <p-tabView (onChange)="onSelectTabAsync($event)">
      <p-tabPanel header="Проекты" [selected]="true">
        <p-table [value]="aProjects" styleClass="p-datatable-gridlines" [tableStyle]="{'min-width': '50rem'}">
          <ng-template pTemplate="caption">
            Проекты на модерации
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th>ID</th>
              <th>Название проекта</th>
              <th>Дата модерации</th>
              <th>Дата создания</th>
              <th>Просмотр</th>
              <th>Одобрение</th>
              <th>Отклонение</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-prj>
            <tr>
              <td>{{prj.projectId}}</td>
              <td>{{prj.projectName}}</td>
              <td>{{prj.dateModeration}}</td>
              <td>{{prj.dateCreated}}</td>
              <td><button pButton 
                          type="button" 
                          label="Просмотр" 
                          class="p-button-text"
                          (click)="onPreviewProjectAsync(prj.projectId)">
              </button>
              </td>
              <td><button pButton 
                          type="button" 
                          label="Одобрить" 
                          class="p-button-success p-button-text" 
                          (click)="onApproveProjectAsync(prj.projectId)">
                </button>
              </td>
              <td><button pButton 
                type="button" 
                label="Отклонить" 
                class="p-button-danger p-button-text"
                (click)="onRejectProjectAsync(prj.projectId)"></button></td>
            </tr>
          </ng-template>
          <ng-template pTemplate="summary">
            Всего: {{totalProjects}}
          </ng-template>
        </p-table>
      </p-tabPanel>

      <!-- Список вакансий. -->
      <p-tabPanel header="Вакансии">
        <p-table [value]="aVacancies" styleClass="p-datatable-gridlines" [tableStyle]="{'min-width': '50rem'}">
          <ng-template pTemplate="caption">
            Вакансии на модерации
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th>ID</th>
              <th>Название вакансии</th>
              <th>Дата модерации</th>
              <th>Дата создания</th>
              <th>Просмотр</th>
              <th>Одобрение</th>
              <th>Отклонение</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-vac>
            <tr>
              <td>{{vac.vacancyId}}</td>
              <td>{{vac.vacancyName}}</td>
              <td>{{vac.dateModeration}}</td>
              <td>{{vac.dateCreated}}</td>
              <td><button pButton 
                          type="button" 
                          label="Просмотр" 
                          class="p-button-text"
                          (click)="onPreviewVacancyAsync(vac.vacancyId)">
              </button>
              </td>
              <td><button pButton 
                          type="button" 
                          label="Одобрить" 
                          class="p-button-success p-button-text" 
                          (click)="onApproveVacancyAsync(vac.vacancyId)">
                </button>
              </td>
              <td><button pButton 
                type="button" 
                label="Отклонить" 
                class="p-button-danger p-button-text"
                (click)="onRejectVacancyAsync(vac.vacancyId)"></button></td>
            </tr>
          </ng-template>
          <ng-template pTemplate="summary">
            Всего: {{totalVacancies}}
          </ng-template>
        </p-table>
      </p-tabPanel>

      <p-tabPanel header="Комментарии к проектам">
        В разработке
      </p-tabPanel>

      <p-tabPanel header="Пользователи">
        <p-table [value]="userBlackList$.value.usersBlackList" 
                styleClass="p-datatable-gridlines" 
                [tableStyle]="{'min-width': '50rem'}"
                class="scroll-table">
          <ng-template pTemplate="caption">
            <h5>Пользователи в ЧС</h5>
            <hr>
            
            <div class="mt-3">
              <button pButton 
                    type="button" 
                    label="Добавить в ЧС" 
                    class="p-button-text p-button-plain"
                    (click)="isShowUserBlackListModal=!isShowUserBlackListModal">
              </button>
            </div>

            <hr>

          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th>ID</th>
              <th>Email</th>
              <th>Номер телефона</th>
              <th>Удалить из ЧС</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-ub>
            <tr>
              <td>{{ub.userId}}</td>
              <td>{{ub.email}}</td>
              <td>{{ub.phoneNumber}}</td>
              <td><button pButton 
                          type="button" 
                          label="Удалить из ЧС" 
                          class="p-button-danger p-button-text">
              </button>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="summary">
            Всего: {{total}}
          </ng-template>
        </p-table>
      </p-tabPanel>

      <p-tabPanel header="Анкеты">
        <p-table [value]="userBlackList$.value.usersBlackList" styleClass="p-datatable-gridlines"
          [tableStyle]="{'min-width': '50rem'}" class="scroll-table">
          <ng-template pTemplate="caption">
            <h5>Анкеты пользователей</h5>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th>ID</th>
              <th>Имя</th>
              <th>Фамилия</th>
              <th>Отчество</th>
              <th>Email</th>
              <th>Номер телефона</th>
              <th>Telegram</th>
              <th>WhatsApp</th>
              <th>Ссылка ВКонтакте</th>
              <th>Другая ссылка</th>
              <th>Должность</th>
              <th>Опыт (стаж)</th>
              <th>Одобрение</th>
              <th>Отклонение</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-profile>
            <tr>
              <td>{{profile.profileInfoId}}</td>
              <td>{{profile.firstName}}</td>
              <td>{{profile.lastName}}</td>
              <td>{{profile.patronymic}}</td>
              <td>{{profile.email}}</td>
              <td>{{profile.phoneNumber}}</td>
              <td>{{profile.telegram}}</td>
              <td>{{profile.whatsApp}}</td>
              <td>{{profile.vkontakte}}</td>
              <td>{{profile.otherLink}}</td>
              <td>{{profile.job}}</td>
              <td>{{profile.otherLink}}</td>
              <td>
                <p-button label="Одобрить анкету"
                          styleClass="p-button-success p-button-text"
                          (click)="onApproveResumeAsync(profile.profileInfoId)">
                </p-button>
              </td>

              <td>
                <p-button label="Отклонить анкету"
                          styleClass="p-button-danger p-button-text"
                          (click)="onRejectResumeAsync(profile.profileInfoId)">
                </p-button>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="summary">
            Всего: {{resumesModeration$.value.total}}
          </ng-template>
        </p-table>
        </p-tabPanel>
    </p-tabView>
  </div>
</div>

<!-- Диалог просмотра проекта. -->
<p-dialog header="Просмотр проекта" 
          [(visible)]="isShowPreviewModerationProjectModal" 
          [modal]="true" 
          [style]="{width: '50vw', height: '50vw'}"
          [maximizable]="false" 
          [draggable]="false" 
          [resizable]="false">
 
  <div class="mt-3">
    <div class="control-input-text-worksheet">
      <div>
          <label>Название проекта</label>
      </div>
      <div>
          <input type="text" 
          class="p-inputtext-sm input-control-worksheet control-project" 
          placeholder="Название проекта" 
          pInputText
          autocomplete="new-password" 
          [(ngModel)]="projectName"
          [disabled]="true" />    
      </div>          
    </div>         

    <div class="control-input-text-worksheet mt-3">
      <div class="control-input-text-worksheet">
         <div>
            <label>Описание проекта</label>
        </div>
        <textarea input-control-worksheet 
                  rows="5" 
                  cols="100" 
                  pInputTextarea 
                  [autoResize]="true" 
                  autocomplete="new-password"
                  placeholder="Детали проекта"
                  [(ngModel)]="projectDetails"
                  class="control-textarea"
                  [disabled]="true"> 
        </textarea>
      </div>          
    </div>             
  </div>
  <ng-template pTemplate="footer">
    <p-button icon="pi pi-check" 
              (click)="onApproveProjectAsync(projectId)" 
              label="Одобрить проект" 
              styleClass="p-button-success p-button-text">
    </p-button>

    <p-button icon="pi pi-check" 
              (click)="onRejectProjectAsync(projectId)" 
              label="Отклонить проект" 
              styleClass="p-button-danger p-button-text">
</p-button>
  </ng-template>
</p-dialog>

<!-- Диалог просмотра вакансии. -->
<p-dialog header="Просмотр вакансии" 
          [(visible)]="isShowPreviewModerationVacancyModal" 
          [modal]="true" 
          [style]="{width: '50vw', height: '50vw'}"
          [maximizable]="false" 
          [draggable]="false" 
          [resizable]="false">
 
  <div class="mt-3">
    <div class="control-input-text-worksheet">
      <div>
          <label>Название вакансии</label>
      </div>
      <div>
          <input type="text" 
          class="p-inputtext-sm input-control-worksheet control-project" 
          placeholder="Название проекта" 
          pInputText
          autocomplete="new-password" 
          [(ngModel)]="vacancyName"
          [disabled]="true" />    
      </div>          
    </div>                    
    
    <div class="control-input-text-worksheet">
      <div>
          <label>Опыт</label>
      </div>
      <div>
          <input type="text" 
                  class="p-inputtext-sm input-control-worksheet control-project" 
                  placeholder="Опыт" 
                  pInputText
                  autocomplete="new-password" 
                  [(ngModel)]="workExperience"
                  [disabled]="true" />    
      </div>          
    </div>   

    <div class="control-input-text-worksheet">
      <div>
          <label>Занятость</label>
      </div>
      <div>
          <input type="text" 
                  class="p-inputtext-sm input-control-worksheet control-project" 
                  placeholder="Занятость" 
                  pInputText
                  autocomplete="new-password" 
                  [(ngModel)]="employment"
                  [disabled]="true" />    
      </div>          
    </div>   

    <div class="control-input-text-worksheet">
      <div>
          <label>Оплата</label>
      </div>
      <div>
          <input type="text" 
                  class="p-inputtext-sm input-control-worksheet control-project" 
                  placeholder="Оплата" 
                  pInputText
                  autocomplete="new-password" 
                  [(ngModel)]="payment"
                  [disabled]="true" />    
      </div>          
    </div>   

    <div class="control-input-text-worksheet mt-3">
      <div class="control-input-text-worksheet">
         <div>
            <label>Описание вакансии</label>
        </div>
        <textarea input-control-worksheet 
                  rows="5" 
                  cols="100" 
                  pInputTextarea 
                  [autoResize]="true" 
                  autocomplete="new-password"
                  placeholder="Детали вакансии"
                  [(ngModel)]="vacancyText"
                  class="control-textarea"
                  [disabled]="true"> 
        </textarea>
      </div>          
    </div>   
  </div>
  <ng-template pTemplate="footer">
    <p-button icon="pi pi-check" 
              (click)="onApproveVacancyAsync(vacancyId)" 
              label="Одобрить вакансию" 
              styleClass="p-button-success p-button-text">
    </p-button>

    <p-button icon="pi pi-check" 
              (click)="onRejectVacancyAsync(vacancyId)" 
              label="Отклонить вакансию" 
              styleClass="p-button-danger p-button-text">
</p-button>
  </ng-template>
</p-dialog>

<!-- Диалог добавления пользователя в ЧС. -->
<p-dialog header="Добавление пользователя в ЧС" 
          [(visible)]="isShowUserBlackListModal" 
          [modal]="true" 
          [style]="{width: '50vw', height: '50vw'}"
          [maximizable]="false" 
          [draggable]="false" 
          [resizable]="false">
 
  <div class="mt-3">
    <div class="control-input-text-worksheet">
      <div>
          <label>Id пользователя</label>
      </div>
      <div>
          <input type="text" 
                class="p-inputtext-sm input-control-worksheet control-project" 
                placeholder="Id пользователя" 
                pInputText
                autocomplete="new-password" 
                [(ngModel)]="userId" />    
      </div>          
    </div>         

    <div class="control-input-text-worksheet mt-3">
      <div class="control-input-text-worksheet">
         <div>
          <label>Email пользователя</label>
        </div>
        <input type="text" 
                class="p-inputtext-sm input-control-worksheet control-project" 
                placeholder="Email" 
                pInputText
                autocomplete="new-password" 
                [(ngModel)]="email" />    
      </div>          
    </div>           
    
    <div class="control-input-text-worksheet mt-3">
      <div class="control-input-text-worksheet">
         <div>
          <label>Номер телефона пользователя (не обязательно)</label>
        </div>
        <input type="text" 
                class="p-inputtext-sm input-control-worksheet control-project" 
                placeholder="Номер телефона" 
                pInputText
                autocomplete="new-password" 
                [(ngModel)]="phoneNumber" />    
      </div>          
    </div>     
  </div>
  <ng-template pTemplate="footer">
    <p-button (click)="onAddUserBlackListAsync()" 
              label="Заблокировать пользователя" 
              styleClass="p-button-text p-button-plain">
    </p-button>
  </ng-template>
</p-dialog>