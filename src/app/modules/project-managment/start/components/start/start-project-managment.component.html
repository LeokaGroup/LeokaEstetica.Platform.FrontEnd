<p-stepper [(activeStep)]="active">
  <!-- Ввод названия проекта. -->
  <p-stepperPanel>
    <ng-template pTemplate="header" let-onClick="onClick" let-index="index">
      <button
        class="button-border px-3 py-2"
        (click)="onClick.emit()" 
        [ngClass]="{
          'button-active': index <= active,
          'button-inactive': index > active
        }">
        <i class="pi pi-pencil"
          [ngClass]="{
            'icon-white': index <= active,
            'icon-black': index > active
          }">
        </i>
     </button>
    </ng-template>
    <ng-template pTemplate="content" let-nextCallback="nextCallback">
      <div class="d-flex block-profile" *ngIf="!projectWorkspaceSettings$.value?.isCommitProjectSettings">
        <div class="flex flex-column gap-2 mx-auto" style="min-height: 16rem; max-width: 32rem">
          <div class="text-center mt-3 mb-3 text-xl font-semibold">Укажите название и префикс проекта в модуле управления проектами</div>
          <div class="field p-fluid">
            <input
              pInputText
              id="idProjectManagementProjectName"
              placeholder="Введите название"
              aria-describedby="idProjectManagementProjectName-help"
              [(ngModel)]="projectManagementProjectName"
              (change)="onUpdateProjectManagementProjectName()"/>
            <small id="idProjectManagementProjectName-help">Обычно проект называют на английском языке, например, «My Project»</small>
          </div>

          <div class="field p-fluid">
            <input
              pInputText
              placeholder="Введите префикс"
              id="idProjectManagementProjectNamePrefix"
              aria-describedby="idProjectManagementProjectNamePrefix-help"
              [(ngModel)]="projectManagementProjectNamePrefix"
              maxlength="9" />
              <small id="idProjectManagementProjectNamePrefix-help">Номера задач будут начинаться с данного префикса.</small>
          </div>

          <div class="flex pt-4 justify-content-end">
              <p-button (onClick)="nextCallback.emit()" label="Далее" icon="pi pi-arrow-right" iconPos="right" [disabled]="!projectManagementProjectName || !projectManagementProjectNamePrefix"/>
          </div>
        </div>
      </div>
    </ng-template>
  </p-stepperPanel>
<!-- Выбор стратегии проекта. -->
  <p-stepperPanel>
    <ng-template pTemplate="header" let-onClick="onClick" let-index="index">
      <button
        class="button-border px-3 py-2"
        (click)="onClick.emit()" 
        [ngClass]="{
          'button-active': index <= active,
          'button-inactive': index > active
      }"
      [disabled]="!projectManagementProjectName || !projectManagementProjectNamePrefix">
        <i class="pi pi-wrench"
          [ngClass]="{
            'icon-white': index <= active,
            'icon-black': index > active
          }">
        </i>
      </button>
    </ng-template>
    <ng-template pTemplate="content" let-prevCallback="prevCallback" let-nextCallback="nextCallback">
      <div class="block-profile" *ngIf="!projectWorkspaceSettings$.value?.isCommitProjectSettings">
        <div class="flex flex-column gap-2 mx-auto" style="max-width: 32rem">
          <div class="text-center mt-3 text-xl font-semibold">Выберите стратегию представления</div>
          <small
            pTooltip="Стратегия представления - это то, в каком виде Вы хотите видеть свое рабочее пространство. Мы запомним Ваш выбор и сохраним его в Ваших настройках. 
              Вы сможете изменить стратегию представления в настройках (чтобы мы запомнили Ваш выбор) или в рабочем пространстве (мы не запоминаем этот выбор)."
            class="caption"
            tooltipPosition="bottom">Что это?
          </small>
          <div class="mt-3 block-project-managment d-flex col-lg-12">
            <div class="col-lg-12">
              <div class="block-view-strategy">
                <div class="flex flex-row gap-3 justify-content-center">
                  <div *ngFor="let str of viewStrategies$.value" class="field-checkbox">
                    <input type="radio" class="btn-check" [value]="str" name="str" id="{{str.strategyId}}" autocomplete="off" [(ngModel)]="selectedStrategy" (change)="onSelectStrategy()"  />
                    <label class="btn m-0" for="{{str.strategyId}}">
                      <div class="flex flex-column gap-3 py-3"> 
                        <h4 class="stragegy-name">{{str.viewStrategyName}}</h4>
                        <p>На бэке пока не сделана логика </p>
                        <p-button label="Подробнее" [outlined]="true" />
                      </div>
                    </label>
                  </div>
                </div>
                <div class="flex pt-4 justify-content-between">
                  <p-button (onClick)="prevCallback.emit()" label="Назад" severity="secondary" icon="pi pi-arrow-left" />
                  <p-button (onClick)="nextCallback.emit()" label="Далее" icon="pi pi-arrow-right" iconPos="right" [disabled]="!isSelectedStrategy" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </p-stepperPanel>
<!-- Выбор шаблона стратегии. -->
  <p-stepperPanel>
    <ng-template pTemplate="header" let-onClick="onClick" let-index="index">
      <button
        class="button-border px-3 py-2"
        (click)="onClick.emit()" 
        [ngClass]="{
          'button-active': index <= active,
          'button-inactive': index > active
        }"
        [disabled]="!isSelectedStrategy">
          <i class="pi pi-pencil"
            [ngClass]="{
              'icon-white': index <= active,
              'icon-black': index > active
            }">
          </i>
      </button>
    </ng-template>
    <ng-template pTemplate="content" let-prevCallback="prevCallback">
      <div class="flex flex-column gap-2 mx-auto" style="min-height: 16rem; max-width: 32rem">
        <div class="text-center mt-3 text-xl font-semibold">Выберите шаблон стратегии</div>
        <div class="flex flex-column justify-content-center gap-2">
          <div class="flex flex-column align-items-center">
            <div class="flex flex-row gap-3 py-3 align-items-center">
              <div *ngFor="let pmt of projectManagmentTemplates$.value" class="field-checkbox">
                <input type="radio" class="btn-check" [value]="pmt" name="pmt" id="{{pmt.templateName}}" autocomplete="off" [(ngModel)]="selectedTemplate" (change)="onChangeTemplate()"  />
                <label class="btn m-0" for="{{pmt.templateName}}">{{pmt.templateName}}</label>
              </div>
            </div>
          </div>

          <div class="flex flex-column">
            <strong class="mb-1 text-center">Шаблон включает в себя статусы</strong>
            <div class="flex flex-row gap-2 flex-wrap justify-content-center py-3">
              <div *ngFor="let ss of aSelectedStatuses">
                <p-chip mb-2 label="{{ss.statusName}}" />
              </div>
              <div *ngIf="!selectedTemplate">
                Шаблон не выбран
              </div>
            </div>
          </div>
        </div>

        <div class="flex mt-4 justify-content-between">
          <p-button (onClick)="prevCallback.emit()" label="Назад" severity="secondary" icon="pi pi-arrow-left" />
          <p-button type="submit"
            styleClass="justify-content-center w-full"
            (onClick)="onRouteWorkSpace()"
            [disabled]="!isSelectedTemplate || !projectManagementProjectName || !projectManagementProjectNamePrefix"
            severity="success">
            Сохранить и перейти в рабочее пространство
          </p-button>
        </div>
      </div>
    </ng-template>
  </p-stepperPanel>
</p-stepper>

<!-- TODO: Проект для управления приходит в url. Удалим лишний код, если не будет использоваться в будущем. -->
<!--<div class="d-flex block-profile space-top-80" *ngIf="!projectWorkspaceSettings$.value?.isCommitProjectSettings">-->
<!--  &lt;!&ndash; Выбор проекта. &ndash;&gt;-->
<!--  <div class="block-project-managment d-flex col-lg-12">-->
<!--    <div class="col-lg-12">-->
<!--      <div class="block-user-projects">-->
<!--        <p-table [value]="userProjects$.value?.userProjects" [(selection)]="selectedProject" dataKey="projectId"-->
<!--          [paginator]="userProjects$.value?.total > 0" [rows]="10" styleClass="p-datatable-gridlines"-->
<!--          responsiveLayout="scroll"-->
<!--          selectionMode="single"-->
<!--          (onRowSelect)="onSelectProject()">-->

<!--          <ng-template pTemplate="caption">-->
<!--            <h3>Выбор проекта для управления</h3>-->
<!--            <small pTooltip="Для перехода в рабочее пространство, Вы должны выбрать свой проект, которым хотите управлять. У каждого проекта свое рабочее пространство.">Что это?</small>-->
<!--          </ng-template>-->

<!--          <ng-template pTemplate="header">-->
<!--            <tr>-->
<!--              <th>ID проекта</th>-->
<!--              <th>Название проекта</th>-->
<!--              <th>Статус проекта</th>-->
<!--            </tr>-->
<!--          </ng-template>-->

<!--          <ng-template pTemplate="body" let-prj>-->
<!--            <tr [pSelectableRow]="prj">-->
<!--              <td>{{prj.projectId}}</td>-->
<!--              <td>{{prj.projectName}}</td>-->
<!--              <td>{{prj.projectStatusName}}</td>-->
<!--            </tr>-->
<!--          </ng-template>-->

<!--          <ng-template pTemplate="summary">-->
<!--            Всего: {{userProjects$.value?.total}}-->
<!--          </ng-template>-->

<!--          <ng-template pTemplate="emptymessage">-->
<!--            <tr>-->
<!--              <td colspan="7">-->
<!--                <div class="empty-orders">-->
<!--                  У вас пока нет проектов.-->
<!--                </div>-->
<!--              </td>-->
<!--            </tr>-->
<!--          </ng-template>-->
<!--        </p-table>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->